<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Fahrtenabrechnung</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 2rem;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .form-group {
      margin-bottom: 1.5rem;
    }
    label {
      display: block;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    input, select {
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    #result {
      margin-top: 1rem;
      font-weight: bold;
      color: #333;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Fahrtenabrechnung</h2>
    <div class="form-group">
      <label for="fahrer">Fahrer (Vorname Nachname):</label>
      <input list="fahrerListe" id="fahrer" placeholder="z. B. Benedikt Beyer">
      <datalist id="fahrerListe">
        <option value="Benedikt Beyer">
        <option value="Jan Beckmann">
      </datalist>
      <div id="fahrer-info"></div>
    </div>

    <div class="form-group">
      <label for="auto">Fahrzeugmodell:</label>
      <input type="text" id="auto">
    </div>

    <div class="form-group">
      <label for="baujahr">Baujahr:</label>
      <input type="number" id="baujahr" min="1980" max="2025">
    </div>

    <div class="form-group">
      <label>Kraftstoff:</label>
      <label><input type="radio" name="kraftstoff" value="benzin"> Benzin</label>
      <label><input type="radio" name="kraftstoff" value="diesel"> Diesel</label>
      <label><input type="radio" name="kraftstoff" value="hybrid"> Hybrid</label>
      <label><input type="radio" name="kraftstoff" value="elektro"> Elektro</label>
    </div>

    <div class="form-group">
      <label for="strecke">Gefahrene Strecke (km):</label>
      <input type="number" id="strecke">
    </div>

    <div class="form-group">
      <button id="berechnen">Kosten berechnen</button>
    </div>

    <div id="result"></div>
  </div>

  <script>
    const fahrerDaten = {
      "benedikt beyer": {
        alter: 27,
        autos: [
          { modell: "VW Golf", baujahr: 1997, kraftstoff: "Benzin" },
          { modell: "Audi A4", baujahr: 2012, kraftstoff: "Diesel" }
        ]
      },
      "jan beckmann": {
        alter: 17,
        autos: [
          { modell: "BMW 320i", baujahr: 2021, kraftstoff: "Hybrid" }
        ]
      }
    };

    const fahrerInput = document.getElementById("fahrer");
    const fahrerInfoBox = document.createElement("div");
    fahrerInfoBox.id = "fahrer-info-box";
    fahrerInfoBox.style.marginTop = "0.5rem";
    fahrerInput.parentElement.appendChild(fahrerInfoBox);

    fahrerInput.addEventListener("input", () => {
      const eingabe = fahrerInput.value.trim().toLowerCase();
      const daten = fahrerDaten[eingabe];
      if (daten) {
        fahrerInfoBox.innerHTML = `
          <strong>Alter:</strong> ${daten.alter} Jahre<br>
          <strong>Registrierte Fahrzeuge:</strong><br>
          ${daten.autos.map(a => `&bull; ${a.modell} (${a.baujahr}, ${a.kraftstoff})`).join("<br>")}
        `;
        const auto = daten.autos[0];
        document.getElementById("auto").value = auto.modell;
        document.getElementById("baujahr").value = auto.baujahr;
        document.querySelectorAll('input[name="kraftstoff"]').forEach(r => {
          r.checked = r.value.toLowerCase() === auto.kraftstoff.toLowerCase();
        });
      } else {
        fahrerInfoBox.innerHTML = "";
      }
    });

    const bezahlungGruppe = document.createElement("div");
    bezahlungGruppe.className = "form-group";
    bezahlungGruppe.style.display = "none";
    bezahlungGruppe.innerHTML = `
      <label for="bezahlart">Bezahlart wählen:</label>
      <select id="bezahlart">
        <option value="bar">Bar</option>
        <option value="überweisung">Überweisung</option>
        <option value="paypal">PayPal</option>
        <option value="beckmann">Beckmann-Fahrten Guthaben (sicher)</option>
      </select>
    `;
    document.querySelector(".container").appendChild(bezahlungGruppe);

    document.getElementById("berechnen").addEventListener("click", () => {
      const strecke = parseFloat(document.getElementById("strecke").value);
      const kraftstoff = document.querySelector('input[name="kraftstoff"]:checked')?.value;
      const baujahr = parseInt(document.getElementById("baujahr").value);

      if (isNaN(strecke) || !kraftstoff || isNaN(baujahr)) {
        document.getElementById("result").innerHTML = "Bitte alle Felder korrekt ausfüllen.";
        return;
      }

      let faktor = 0.3; // Standard

      if (kraftstoff === "diesel") faktor = 0.35;
      if (kraftstoff === "elektro") faktor = 0.2;
      if (baujahr < 2000) faktor += 0.05;

      const kosten = strecke * faktor;
      document.getElementById("result").innerHTML = `Gesamtkosten: ${kosten.toFixed(2)} €`;
      bezahlungGruppe.style.display = "block";
    });
  </script>
</body>
</html>
